/* tslint:disable */
/* eslint-disable */
/**
 * Overmind Backend
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 0.1.0
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  AgentDescriptionUpdateRequest,
  AgentReviewSpansResponse,
  HTTPValidationError,
  ReviewFailedRequest,
  SyncRefreshDescriptionRequest,
} from '../models/index';
import {
    AgentDescriptionUpdateRequestFromJSON,
    AgentDescriptionUpdateRequestToJSON,
    AgentReviewSpansResponseFromJSON,
    AgentReviewSpansResponseToJSON,
    HTTPValidationErrorFromJSON,
    HTTPValidationErrorToJSON,
    ReviewFailedRequestFromJSON,
    ReviewFailedRequestToJSON,
    SyncRefreshDescriptionRequestFromJSON,
    SyncRefreshDescriptionRequestToJSON,
} from '../models/index';

export interface CompletePeriodicReviewApiV1AgentReviewsPromptSlugCompleteReviewPostRequest {
    promptSlug: string;
    currentSpanCount: number;
    projectId?: string | null;
    useCache?: boolean;
}

export interface GetSpansForReviewApiV1AgentReviewsPromptSlugReviewSpansGetRequest {
    promptSlug: string;
    projectId?: string | null;
    useCache?: boolean;
}

export interface MarkInitialReviewCompleteApiV1AgentReviewsPromptSlugMarkInitialReviewCompletePostRequest {
    promptSlug: string;
    projectId?: string | null;
    useCache?: boolean;
}

export interface ReportReviewFailedApiV1AgentReviewsPromptSlugReviewFailedPostRequest {
    promptSlug: string;
    reviewFailedRequest: ReviewFailedRequest;
    projectId?: string | null;
    useCache?: boolean;
}

export interface SyncRefreshDescriptionApiV1AgentReviewsPromptSlugSyncRefreshDescriptionPostRequest {
    promptSlug: string;
    syncRefreshDescriptionRequest: SyncRefreshDescriptionRequest;
    projectId?: string | null;
    useCache?: boolean;
}

export interface UpdateAgentDescriptionAndCriteriaApiV1AgentReviewsPromptSlugUpdateDescriptionPostRequest {
    promptSlug: string;
    agentDescriptionUpdateRequest: AgentDescriptionUpdateRequest;
    projectId?: string | null;
    useCache?: boolean;
}

export interface UpdateAgentDescriptionFromFeedbackApiV1AgentReviewsPromptSlugUpdateAgentDescriptionPostRequest {
    promptSlug: string;
    projectId?: string | null;
    useCache?: boolean;
}

/**
 * 
 */
export class AgentReviewsApi extends runtime.BaseAPI {

    /**
     * Mark a periodic review as completed/dismissed and update the next review threshold. This endpoint is called when a user dismisses or completes a periodic review notification.
     * Complete Periodic Review
     */
    async completePeriodicReviewApiV1AgentReviewsPromptSlugCompleteReviewPostRaw(requestParameters: CompletePeriodicReviewApiV1AgentReviewsPromptSlugCompleteReviewPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<any>> {
        if (requestParameters['promptSlug'] == null) {
            throw new runtime.RequiredError(
                'promptSlug',
                'Required parameter "promptSlug" was null or undefined when calling completePeriodicReviewApiV1AgentReviewsPromptSlugCompleteReviewPost().'
            );
        }

        if (requestParameters['currentSpanCount'] == null) {
            throw new runtime.RequiredError(
                'currentSpanCount',
                'Required parameter "currentSpanCount" was null or undefined when calling completePeriodicReviewApiV1AgentReviewsPromptSlugCompleteReviewPost().'
            );
        }

        const queryParameters: any = {};

        if (requestParameters['currentSpanCount'] != null) {
            queryParameters['current_span_count'] = requestParameters['currentSpanCount'];
        }

        if (requestParameters['projectId'] != null) {
            queryParameters['project_id'] = requestParameters['projectId'];
        }

        if (requestParameters['useCache'] != null) {
            queryParameters['use_cache'] = requestParameters['useCache'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            // oauth required
            headerParameters["Authorization"] = await this.configuration.accessToken("OAuth2PasswordBearer", []);
        }


        let urlPath = `/api/v1/agent-reviews/{prompt_slug}/complete-review`;
        urlPath = urlPath.replace(`{${"prompt_slug"}}`, encodeURIComponent(String(requestParameters['promptSlug'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<any>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     * Mark a periodic review as completed/dismissed and update the next review threshold. This endpoint is called when a user dismisses or completes a periodic review notification.
     * Complete Periodic Review
     */
    async completePeriodicReviewApiV1AgentReviewsPromptSlugCompleteReviewPost(requestParameters: CompletePeriodicReviewApiV1AgentReviewsPromptSlugCompleteReviewPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<any> {
        const response = await this.completePeriodicReviewApiV1AgentReviewsPromptSlugCompleteReviewPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Get 2 worst-scored and 2 best-scored spans for agent review. Used in the interactive criteria refinement dialogue.
     * Get Spans For Review
     */
    async getSpansForReviewApiV1AgentReviewsPromptSlugReviewSpansGetRaw(requestParameters: GetSpansForReviewApiV1AgentReviewsPromptSlugReviewSpansGetRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<AgentReviewSpansResponse>> {
        if (requestParameters['promptSlug'] == null) {
            throw new runtime.RequiredError(
                'promptSlug',
                'Required parameter "promptSlug" was null or undefined when calling getSpansForReviewApiV1AgentReviewsPromptSlugReviewSpansGet().'
            );
        }

        const queryParameters: any = {};

        if (requestParameters['projectId'] != null) {
            queryParameters['project_id'] = requestParameters['projectId'];
        }

        if (requestParameters['useCache'] != null) {
            queryParameters['use_cache'] = requestParameters['useCache'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            // oauth required
            headerParameters["Authorization"] = await this.configuration.accessToken("OAuth2PasswordBearer", []);
        }


        let urlPath = `/api/v1/agent-reviews/{prompt_slug}/review-spans`;
        urlPath = urlPath.replace(`{${"prompt_slug"}}`, encodeURIComponent(String(requestParameters['promptSlug'])));

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => AgentReviewSpansResponseFromJSON(jsonValue));
    }

    /**
     * Get 2 worst-scored and 2 best-scored spans for agent review. Used in the interactive criteria refinement dialogue.
     * Get Spans For Review
     */
    async getSpansForReviewApiV1AgentReviewsPromptSlugReviewSpansGet(requestParameters: GetSpansForReviewApiV1AgentReviewsPromptSlugReviewSpansGetRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<AgentReviewSpansResponse> {
        const response = await this.getSpansForReviewApiV1AgentReviewsPromptSlugReviewSpansGetRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Mark the initial agent review as completed so the review badge is dismissed. Called after the user confirms the span feedback dialog.
     * Mark Initial Review Complete
     */
    async markInitialReviewCompleteApiV1AgentReviewsPromptSlugMarkInitialReviewCompletePostRaw(requestParameters: MarkInitialReviewCompleteApiV1AgentReviewsPromptSlugMarkInitialReviewCompletePostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<any>> {
        if (requestParameters['promptSlug'] == null) {
            throw new runtime.RequiredError(
                'promptSlug',
                'Required parameter "promptSlug" was null or undefined when calling markInitialReviewCompleteApiV1AgentReviewsPromptSlugMarkInitialReviewCompletePost().'
            );
        }

        const queryParameters: any = {};

        if (requestParameters['projectId'] != null) {
            queryParameters['project_id'] = requestParameters['projectId'];
        }

        if (requestParameters['useCache'] != null) {
            queryParameters['use_cache'] = requestParameters['useCache'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            // oauth required
            headerParameters["Authorization"] = await this.configuration.accessToken("OAuth2PasswordBearer", []);
        }


        let urlPath = `/api/v1/agent-reviews/{prompt_slug}/mark-initial-review-complete`;
        urlPath = urlPath.replace(`{${"prompt_slug"}}`, encodeURIComponent(String(requestParameters['promptSlug'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<any>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     * Mark the initial agent review as completed so the review badge is dismissed. Called after the user confirms the span feedback dialog.
     * Mark Initial Review Complete
     */
    async markInitialReviewCompleteApiV1AgentReviewsPromptSlugMarkInitialReviewCompletePost(requestParameters: MarkInitialReviewCompleteApiV1AgentReviewsPromptSlugMarkInitialReviewCompletePostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<any> {
        const response = await this.markInitialReviewCompleteApiV1AgentReviewsPromptSlugMarkInitialReviewCompletePostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Log that the max review iterations were reached without user satisfaction. Records a structured backend error for investigation.
     * Report Review Failed
     */
    async reportReviewFailedApiV1AgentReviewsPromptSlugReviewFailedPostRaw(requestParameters: ReportReviewFailedApiV1AgentReviewsPromptSlugReviewFailedPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<any>> {
        if (requestParameters['promptSlug'] == null) {
            throw new runtime.RequiredError(
                'promptSlug',
                'Required parameter "promptSlug" was null or undefined when calling reportReviewFailedApiV1AgentReviewsPromptSlugReviewFailedPost().'
            );
        }

        if (requestParameters['reviewFailedRequest'] == null) {
            throw new runtime.RequiredError(
                'reviewFailedRequest',
                'Required parameter "reviewFailedRequest" was null or undefined when calling reportReviewFailedApiV1AgentReviewsPromptSlugReviewFailedPost().'
            );
        }

        const queryParameters: any = {};

        if (requestParameters['projectId'] != null) {
            queryParameters['project_id'] = requestParameters['projectId'];
        }

        if (requestParameters['useCache'] != null) {
            queryParameters['use_cache'] = requestParameters['useCache'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            // oauth required
            headerParameters["Authorization"] = await this.configuration.accessToken("OAuth2PasswordBearer", []);
        }


        let urlPath = `/api/v1/agent-reviews/{prompt_slug}/review-failed`;
        urlPath = urlPath.replace(`{${"prompt_slug"}}`, encodeURIComponent(String(requestParameters['promptSlug'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: ReviewFailedRequestToJSON(requestParameters['reviewFailedRequest']),
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<any>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     * Log that the max review iterations were reached without user satisfaction. Records a structured backend error for investigation.
     * Report Review Failed
     */
    async reportReviewFailedApiV1AgentReviewsPromptSlugReviewFailedPost(requestParameters: ReportReviewFailedApiV1AgentReviewsPromptSlugReviewFailedPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<any> {
        const response = await this.reportReviewFailedApiV1AgentReviewsPromptSlugReviewFailedPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Synchronously update agent description based on user feedback on spans. Unlike the async version, this awaits the LLM call directly so the frontend can wait for the result during the interactive review loop.
     * Sync Refresh Description
     */
    async syncRefreshDescriptionApiV1AgentReviewsPromptSlugSyncRefreshDescriptionPostRaw(requestParameters: SyncRefreshDescriptionApiV1AgentReviewsPromptSlugSyncRefreshDescriptionPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<any>> {
        if (requestParameters['promptSlug'] == null) {
            throw new runtime.RequiredError(
                'promptSlug',
                'Required parameter "promptSlug" was null or undefined when calling syncRefreshDescriptionApiV1AgentReviewsPromptSlugSyncRefreshDescriptionPost().'
            );
        }

        if (requestParameters['syncRefreshDescriptionRequest'] == null) {
            throw new runtime.RequiredError(
                'syncRefreshDescriptionRequest',
                'Required parameter "syncRefreshDescriptionRequest" was null or undefined when calling syncRefreshDescriptionApiV1AgentReviewsPromptSlugSyncRefreshDescriptionPost().'
            );
        }

        const queryParameters: any = {};

        if (requestParameters['projectId'] != null) {
            queryParameters['project_id'] = requestParameters['projectId'];
        }

        if (requestParameters['useCache'] != null) {
            queryParameters['use_cache'] = requestParameters['useCache'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            // oauth required
            headerParameters["Authorization"] = await this.configuration.accessToken("OAuth2PasswordBearer", []);
        }


        let urlPath = `/api/v1/agent-reviews/{prompt_slug}/sync-refresh-description`;
        urlPath = urlPath.replace(`{${"prompt_slug"}}`, encodeURIComponent(String(requestParameters['promptSlug'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: SyncRefreshDescriptionRequestToJSON(requestParameters['syncRefreshDescriptionRequest']),
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<any>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     * Synchronously update agent description based on user feedback on spans. Unlike the async version, this awaits the LLM call directly so the frontend can wait for the result during the interactive review loop.
     * Sync Refresh Description
     */
    async syncRefreshDescriptionApiV1AgentReviewsPromptSlugSyncRefreshDescriptionPost(requestParameters: SyncRefreshDescriptionApiV1AgentReviewsPromptSlugSyncRefreshDescriptionPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<any> {
        const response = await this.syncRefreshDescriptionApiV1AgentReviewsPromptSlugSyncRefreshDescriptionPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Update agent description and criteria based on user edits. Triggers re-scoring of 10 randomly sampled spans to preview the impact.
     * Update Agent Description And Criteria
     */
    async updateAgentDescriptionAndCriteriaApiV1AgentReviewsPromptSlugUpdateDescriptionPostRaw(requestParameters: UpdateAgentDescriptionAndCriteriaApiV1AgentReviewsPromptSlugUpdateDescriptionPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<any>> {
        if (requestParameters['promptSlug'] == null) {
            throw new runtime.RequiredError(
                'promptSlug',
                'Required parameter "promptSlug" was null or undefined when calling updateAgentDescriptionAndCriteriaApiV1AgentReviewsPromptSlugUpdateDescriptionPost().'
            );
        }

        if (requestParameters['agentDescriptionUpdateRequest'] == null) {
            throw new runtime.RequiredError(
                'agentDescriptionUpdateRequest',
                'Required parameter "agentDescriptionUpdateRequest" was null or undefined when calling updateAgentDescriptionAndCriteriaApiV1AgentReviewsPromptSlugUpdateDescriptionPost().'
            );
        }

        const queryParameters: any = {};

        if (requestParameters['projectId'] != null) {
            queryParameters['project_id'] = requestParameters['projectId'];
        }

        if (requestParameters['useCache'] != null) {
            queryParameters['use_cache'] = requestParameters['useCache'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            // oauth required
            headerParameters["Authorization"] = await this.configuration.accessToken("OAuth2PasswordBearer", []);
        }


        let urlPath = `/api/v1/agent-reviews/{prompt_slug}/update-description`;
        urlPath = urlPath.replace(`{${"prompt_slug"}}`, encodeURIComponent(String(requestParameters['promptSlug'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: AgentDescriptionUpdateRequestToJSON(requestParameters['agentDescriptionUpdateRequest']),
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<any>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     * Update agent description and criteria based on user edits. Triggers re-scoring of 10 randomly sampled spans to preview the impact.
     * Update Agent Description And Criteria
     */
    async updateAgentDescriptionAndCriteriaApiV1AgentReviewsPromptSlugUpdateDescriptionPost(requestParameters: UpdateAgentDescriptionAndCriteriaApiV1AgentReviewsPromptSlugUpdateDescriptionPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<any> {
        const response = await this.updateAgentDescriptionAndCriteriaApiV1AgentReviewsPromptSlugUpdateDescriptionPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Update agent description based on accumulated span feedback. This endpoint should be called after users submit feedback via the standard span feedback endpoint. It analyzes all judge_feedback on spans and updates the agent description accordingly.
     * Update Agent Description From Feedback
     */
    async updateAgentDescriptionFromFeedbackApiV1AgentReviewsPromptSlugUpdateAgentDescriptionPostRaw(requestParameters: UpdateAgentDescriptionFromFeedbackApiV1AgentReviewsPromptSlugUpdateAgentDescriptionPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<any>> {
        if (requestParameters['promptSlug'] == null) {
            throw new runtime.RequiredError(
                'promptSlug',
                'Required parameter "promptSlug" was null or undefined when calling updateAgentDescriptionFromFeedbackApiV1AgentReviewsPromptSlugUpdateAgentDescriptionPost().'
            );
        }

        const queryParameters: any = {};

        if (requestParameters['projectId'] != null) {
            queryParameters['project_id'] = requestParameters['projectId'];
        }

        if (requestParameters['useCache'] != null) {
            queryParameters['use_cache'] = requestParameters['useCache'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            // oauth required
            headerParameters["Authorization"] = await this.configuration.accessToken("OAuth2PasswordBearer", []);
        }


        let urlPath = `/api/v1/agent-reviews/{prompt_slug}/update-agent-description`;
        urlPath = urlPath.replace(`{${"prompt_slug"}}`, encodeURIComponent(String(requestParameters['promptSlug'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<any>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     * Update agent description based on accumulated span feedback. This endpoint should be called after users submit feedback via the standard span feedback endpoint. It analyzes all judge_feedback on spans and updates the agent description accordingly.
     * Update Agent Description From Feedback
     */
    async updateAgentDescriptionFromFeedbackApiV1AgentReviewsPromptSlugUpdateAgentDescriptionPost(requestParameters: UpdateAgentDescriptionFromFeedbackApiV1AgentReviewsPromptSlugUpdateAgentDescriptionPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<any> {
        const response = await this.updateAgentDescriptionFromFeedbackApiV1AgentReviewsPromptSlugUpdateAgentDescriptionPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

}
