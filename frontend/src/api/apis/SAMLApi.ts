/* tslint:disable */
/* eslint-disable */
/**
 * Overmind Backend
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 0.1.0
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  HTTPValidationError,
  SAMLLoginRequest,
} from '../models/index';
import {
    HTTPValidationErrorFromJSON,
    HTTPValidationErrorToJSON,
    SAMLLoginRequestFromJSON,
    SAMLLoginRequestToJSON,
} from '../models/index';

export interface SamlAcsApiV1IamSamlAcsPostRequest {
    sAMLResponse: string;
    relayState: string;
}

export interface SamlLoginRequestApiV1IamSamlLoginPostRequest {
    sAMLLoginRequest: SAMLLoginRequest;
}

/**
 * 
 */
export class SAMLApi extends runtime.BaseAPI {

    /**
     * SAML Assertion Consumer Service (ACS) endpoint.  This endpoint: 1. Receives and validates SAML assertion from IdP 2. Extracts user attributes 3. Creates/updates user in database 4. Issues JWT token 5. Redirects to frontend with token in URL fragment
     * Saml Acs
     */
    async samlAcsApiV1IamSamlAcsPostRaw(requestParameters: SamlAcsApiV1IamSamlAcsPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<any>> {
        if (requestParameters['sAMLResponse'] == null) {
            throw new runtime.RequiredError(
                'sAMLResponse',
                'Required parameter "sAMLResponse" was null or undefined when calling samlAcsApiV1IamSamlAcsPost().'
            );
        }

        if (requestParameters['relayState'] == null) {
            throw new runtime.RequiredError(
                'relayState',
                'Required parameter "relayState" was null or undefined when calling samlAcsApiV1IamSamlAcsPost().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        const consumes: runtime.Consume[] = [
            { contentType: 'application/x-www-form-urlencoded' },
        ];
        // @ts-ignore: canConsumeForm may be unused
        const canConsumeForm = runtime.canConsumeForm(consumes);

        let formParams: { append(param: string, value: any): any };
        let useForm = false;
        if (useForm) {
            formParams = new FormData();
        } else {
            formParams = new URLSearchParams();
        }

        if (requestParameters['sAMLResponse'] != null) {
            formParams.append('SAMLResponse', requestParameters['sAMLResponse'] as any);
        }

        if (requestParameters['relayState'] != null) {
            formParams.append('RelayState', requestParameters['relayState'] as any);
        }


        let urlPath = `/api/v1/iam/saml/acs`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: formParams,
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<any>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     * SAML Assertion Consumer Service (ACS) endpoint.  This endpoint: 1. Receives and validates SAML assertion from IdP 2. Extracts user attributes 3. Creates/updates user in database 4. Issues JWT token 5. Redirects to frontend with token in URL fragment
     * Saml Acs
     */
    async samlAcsApiV1IamSamlAcsPost(requestParameters: SamlAcsApiV1IamSamlAcsPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<any> {
        const response = await this.samlAcsApiV1IamSamlAcsPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Initiate SAML authentication request.  This endpoint: 1. Receives user email from frontend 2. Determines the organisation (from existing user or email domain) 3. Initiates SAML AuthN request 4. Returns redirect URL for frontend to navigate to IdP  Returns JSON with: - redirect_url: URL to navigate to for IdP authentication - organisation_id: ID of the organisation for this SAML flow
     * Saml Login Request
     */
    async samlLoginRequestApiV1IamSamlLoginPostRaw(requestParameters: SamlLoginRequestApiV1IamSamlLoginPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<any>> {
        if (requestParameters['sAMLLoginRequest'] == null) {
            throw new runtime.RequiredError(
                'sAMLLoginRequest',
                'Required parameter "sAMLLoginRequest" was null or undefined when calling samlLoginRequestApiV1IamSamlLoginPost().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';


        let urlPath = `/api/v1/iam/saml/login`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: SAMLLoginRequestToJSON(requestParameters['sAMLLoginRequest']),
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<any>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     * Initiate SAML authentication request.  This endpoint: 1. Receives user email from frontend 2. Determines the organisation (from existing user or email domain) 3. Initiates SAML AuthN request 4. Returns redirect URL for frontend to navigate to IdP  Returns JSON with: - redirect_url: URL to navigate to for IdP authentication - organisation_id: ID of the organisation for this SAML flow
     * Saml Login Request
     */
    async samlLoginRequestApiV1IamSamlLoginPost(requestParameters: SamlLoginRequestApiV1IamSamlLoginPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<any> {
        const response = await this.samlLoginRequestApiV1IamSamlLoginPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

}
